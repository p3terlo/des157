<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Experiment 2</title>
</head>
<body>
    <h1>Horoscope Generator</h1>
    
    <script>
        // Generates horoscope according to user's birthday
        (function () {
            'use strict';

            let name = prompt('Enter your name');
            let dob = prompt('Enter your date of birth (MM/DD/YY)');

            let dobArr = [];
            let horoscope = '';
            
            name = name.charAt(0).toUpperCase() + name.slice(1);
            dob = dob.split('/');
            
            function splitter(dob, dobArr) {

                for (let unit of dob) {
                    unit = parseInt(unit);

                    if (isNaN(unit)) {

                        alert('Invalid date format');
                        
                        let pTag = document.createElement('p');
                        let msg = document.createTextNode('Error with date format, please refresh page.');
                        pTag.appendChild(msg);
                        document.querySelector('body').appendChild(pTag);

                        return;

                    }

                    dobArr.push(unit);
                }

                return dobArr;
            };

            dobArr = splitter(dob, dobArr);
            if (dobArr === undefined || dobArr.length == 0) {
                return;
            }

            let month = dobArr[0];
            let day = dobArr[1];

            switch(month) {
                case 1:
                    if (day <= 19) {
                        horoscope = 'Capricorn';
                    } else {
                        horoscope = 'Aquarius';
                    }
                    break;
                case 2:
                    if (day <= 18) {
                        horoscope = 'Aquarius';
                    } else {
                        horoscope = 'Pisces';
                    }
                    break;
                case 3:
                    if (day <= 20) {
                            horoscope = 'Pisces';
                        } else {
                            horoscope = 'Aries';
                        }
                        break;
                case 4:
                    if (day <= 19) {
                            horoscope = 'Aries';
                        } else {
                            horoscope = 'Taurus';
                        }
                        break;
                case 5:
                    if (day <= 20) {
                            horoscope = 'Taurus';
                        } else {
                            horoscope = 'Gemini';
                        }
                        break;
                case 6:
                    if (day <= 20) {
                            horoscope = 'Gemini';
                        } else {
                            horoscope = 'Cancer';
                        }
                        break;
                case 7:
                    if (day <= 22) {
                            horoscope = 'Cancer';
                        } else {
                            horoscope = 'Leo';
                        }
                        break;
                case 8:
                    if (day <= 22) {
                            horoscope = 'Leo';
                        } else {
                            horoscope = 'Virgo';
                        }
                        break;
                case 9:
                    if (day <= 22) {
                            horoscope = 'Virgo';
                        } else {
                            horoscope = 'Libra';
                        }
                        break;
                case 10:
                    if (day <= 22) {
                            horoscope = 'Libra';
                        } else {
                            horoscope = 'Scorpio';
                        }
                        break;
                case 11:
                    if (day <= 21) {
                            horoscope = 'Scorpio';
                        } else {
                            horoscope = 'Sagittarius';
                        }
                        break;
                case 12:
                    if (day <= 21) {
                            horoscope = 'Sagittarius';
                        } else {
                            horoscope = 'Capricorn';
                        }
                        break;
                default:
                    break;
            }

            let generate = function(name, dobArr, horoscope) {
                let pTag = document.createElement('p');
                let msg = document.createTextNode(`${name}, according to your birthday ${dobArr[0]}/${dobArr[1]}/${dobArr[2]}, you are a ${horoscope}.`);
                pTag.appendChild(msg);
                document.querySelector('body').appendChild(pTag)
            }

            generate(name,dobArr,horoscope);
        }());
    </script>
</body>
</html>